/** @license
 * Autodesk clearx
 * Date: 2019-10-04
 * License: Apache-2.0
 *
 * Bundled dependencies (npm packages): 
 * {"package":"nanoid@2.1.2","license":"MIT","link":"https://github.com/ai/nanoid#readme"}, {"package":"deepmerge@3.1.0","license":"MIT","link":"https://github.com/KyleAMathews/deepmerge"}, {"package":"fast-deep-equal@2.0.1","license":"MIT","link":"https://github.com/epoberezkin/fast-deep-equal#readme"}
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ClearX=e()}(this,function(){"use strict";if("production"!==process.env.NODE_ENV){if("undefined"!=typeof navigator&&"ReactNative"===navigator.product)throw new Error("React Native does not have a built-in secure random generator. If you don’t need unpredictable IDs, you can use `nanoid/non-secure`. For secure ID install `expo-random` locally and use `nanoid/async`.");if("undefined"==typeof self||!self.crypto&&!self.msCrypto)throw new Error("Your browser does not have secure random generator. If you don’t need unpredictable IDs, you can use nanoid/non-secure.")}var i=self.crypto||self.msCrypto;"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var t,a=(function(t,e){t.exports=function(){var c=function(t){return!(!(n=t)||"object"!=typeof n||(e=t,"[object RegExp]"===(r=Object.prototype.toString.call(e))||"[object Date]"===r||e.$$typeof===o));var e,r,n},o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function f(t,e){return!1!==e.clone&&e.isMergeableObject(t)?l((r=t,Array.isArray(r)?[]:{}),t,e):t;var r}function h(t,e,r){return t.concat(e).map(function(t){return f(t,r)})}function l(t,e,r){(r=r||{}).arrayMerge=r.arrayMerge||h,r.isMergeableObject=r.isMergeableObject||c;var n,o,i,a,s=Array.isArray(e),u=Array.isArray(t),p=s===u;return p?s?r.arrayMerge(t,e,r):(n=t,o=e,a={},(i=r).isMergeableObject(n)&&Object.keys(n).forEach(function(t){a[t]=f(n[t],i)}),Object.keys(o).forEach(function(t){i.isMergeableObject(o[t])&&n[t]?a[t]=l(n[t],o[t],i):a[t]=f(o[t],i)}),a):f(e,r)}return l.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(t,e){return l(t,e,r)},{})},l}()}(t={exports:{}},t.exports),t.exports),l=Array.isArray,y=Object.keys,d=Object.prototype.hasOwnProperty,u=function(t){return isNaN(t)?t:parseInt(t,10)},c=function(t,e,r){return!n(t[e],r)&&(t[e]=r,t[e]===r)},n=function(t,e){return void 0!==t&&function t(e,r){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){var n,o,i,a=l(e),s=l(r);if(a&&s){if((o=e.length)!=r.length)return!1;for(n=o;0!=n--;)if(!t(e[n],r[n]))return!1;return!0}if(a!=s)return!1;var u=e instanceof Date,p=r instanceof Date;if(u!=p)return!1;if(u&&p)return e.getTime()==r.getTime();var c=e instanceof RegExp,f=r instanceof RegExp;if(c!=f)return!1;if(c&&f)return e.toString()==r.toString();var h=y(e);if((o=h.length)!==y(r).length)return!1;for(n=o;0!=n--;)if(!d.call(r,h[n]))return!1;for(n=o;0!=n--;)if(!t(e[i=h[n]],r[i]))return!1;return!0}return e!=e&&r!=r}(t,e)},f=function(t,e,r){if(void 0===e&&(e="."),void 0===r&&(r="\\"),!t)return[];if(Array.isArray(t))return t;for(var n=[],o="",i=0,a=t.length;i<a;++i){var s=t[i];s===e&&t[i-1]!==r?(0<o.length&&n.push(u(o)),o=""):s!==r&&(o+=t[i])}return 0<o.length&&n.push(u(o)),n},s=function(t,e,r){if(void 0===t)return r;if(!e||0===e.length)return t;var n=(e=f(e))[0],o=e.slice(1);return isNaN(n)||(n*=1),s(t[n],o,r)},h=function(t,e,r,n){var o=!1;if(void 0===t)return[!1,o];if(!e||0===e.length)return[!1,o];var i=(e=f(e))[0],a=e[1],s=e.slice(2);if(void 0===a)return t.hasOwnProperty(i)&&n?[!0,o]:[!0,o=c(t,i,r)];if(!t.hasOwnProperty(i)){var u=isNaN(a)?{}:[];o=c(t,i,u)}var p=h(t[i],[a].concat(s),r,n);return[p[0],p[1]||o]},p=["push","pop","splice","shift","unshift","sort"],o=function(t,e,r){for(var n=[],o=arguments.length-3;0<o--;)n[o]=arguments[o+3];if(-1===p.indexOf(r))return!1;var i=s(t,e);Array.isArray(i)||h(t,e,i=[]);i.length;try{i[r].apply(i,n)}catch(t){}return[!0,!0]},v=function(t,e,r){void 0===r&&(r=1);var n=parseInt(s(t,e),10);return isNaN(n)?n=0:n+=r,h(t,e,n)},g=function(t,e){var r=!1;if(void 0===t)return[!1,r];if(!e||0===e.length)return[!1,r];var n=(e=f(e))[0],o=e.slice(1);if(1!==e.length)return g(t[n],[].concat(o));if(Array.isArray(t)&&!isNaN(n)){var i=t.length;t.splice(n,1),r=i!==t.length}else t.hasOwnProperty(n)&&(r=delete t[n]);return[!0,r]},m=function(t,e,r,n){void 0===e&&(e="."),this.paths=t,this.keySeperator=e,this.store=r,this.dataObserver=n,this.components=[],this.afterUpdateEvents=[]},e={keys:{configurable:!0}};e.keys.get=function(){var t=this.paths;if(Array.isArray(t))return t;var e=[];if("string"==typeof t)e=[f(t,this.keySeperator)];else{if("[object Object]"!==t.toString())return t;for(var r in t)t.hasOwnProperty(r)&&e.push(f(t[r],this.keySeperator))}return e},m.prototype.observe=function(){if(0!==this.components.length&&!this.cancelObserver){var t=this.dataObserver,e=this.keys,r=this.updateComponents.bind(this);this.cancelDataListener=t.attachObserver(e,r)}},m.prototype.unobserve=function(){this.cancelDataListener&&(this.cancelDataListener(),delete this.cancelDataListener)},m.prototype.listenUnmount=function(t,e){var r=this;if(Array.isArray(t))return function(){};var n=t.componentWillUnmount;t.componentWillUnmount=function(){e(),"function"==typeof r.componentWillUnmount&&r.componentWillUnmount.call(t)},t.componentWillUnmount.__original=n},m.prototype.unlistenUnmount=function(t){if(t.componentWillUnmount){var e=t.componentWillUnmount.__original;e&&(t.componentWillUnmount=e)}},m.prototype.updateData=function(){var t,r=this,e={},n=this.paths;if("string"==typeof n)n=f(n,this.keySeperator),e=this.store.get(n);else if(Array.isArray(n))e=n.map(function(t){var e=f(t,r.keySeperator);return r.store.get(e)});else for(var o in n){var i=f(n[o],this.keySeperator);e[o]=this.store.get(i)}"object"==typeof e&&(t=a({},e),Object.freeze&&Object.freeze(t),e=t),this.data=e},m.prototype.updateComponents=function(){var e=this;this.updateData(),this.components.forEach(function(t){e.assignState(t)}),this.executeAfterUpdate()},m.prototype.assignStateFC=function(t,e){var r,n;if(Array.isArray(t)&&((r=t)[0],n=r[1]),n)return e||(n(this.data),t[0]=this.data),!0},m.prototype.assignStateCC=function(t,e){if("function"==typeof t.setState)return e?(t.state=t.state||{},t.state.store=this.data):t.setState({store:this.data}),!0},m.prototype.assignStateOthers=function(t){"object"==typeof t&&(t.data=this.data)},m.prototype.assignState=function(t,e){void 0===e&&(e=!1);var r=this.assignStateFC(t,e),n=this.assignStateCC(t,e);r||n||this.assignStateOthers(t,e)},m.prototype.executeAfterUpdate=function(){var e=this;this.afterUpdateEvents.forEach(function(t){try{t(e.data)}catch(t){console.log(t)}})},m.prototype.addMark=function(t,e){var r=t;Array.isArray(t)&&(r=t[1]),r.__segment=e},m.prototype.removeMark=function(t){var e=t;Array.isArray(t)&&(e=t[1]),delete e.__segment},Object.defineProperties(m.prototype,e);var b=function(t,e,r,n,o){this.id=e||function(t){t=t||21;for(var e="",r=i.getRandomValues(new Uint8Array(t));0<t--;)e+="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-"[63&r[t]];return e}(),this.paths=t,this._helper=new m(t,r,n,o),this.keySeperator=r,this.store=n,this.dataObserver=o,this.dataTransformers=[]},r={data:{configurable:!0},components:{configurable:!0},afterUpdateEvents:{configurable:!0}};b.prototype.dataTransformer=function(t){"function"==typeof t&&this.dataTransformers.push(t)},b.prototype.findComponent=function(t){Array.isArray(t)&&(t=t[1]);for(var e=this._helper.components,r=0;r<e.length;r++){var n=e[r];if(Array.isArray(n)&&(n=n[1]),t===n)return r}return-1},b.prototype.linkComponent=function(t){if(t){var e=this._helper,r=this.unlinkComponent.bind(this,t),n={data:this.data,unlinkComponent:r};return-1<this.findComponent(t)||(e.components.push(t),e.observe(),e.addMark(t,this),e.listenUnmount(t,r),e.assignState(t,!0)),n}},r.data.get=function(){var t=this._helper;return t.data||t.updateData(),t.data},r.components.get=function(){return this._helper.components.slice(0)},r.afterUpdateEvents.get=function(){return this._helper.afterUpdateEvents.slice(0)},b.prototype.unlinkComponent=function(t){if(t){var e=this._helper,r=this.findComponent(t);-1<r&&(e.removeMark(t),e.components.splice(r,1),e.unlistenUnmount(t)),0===e.components.length&&e.unobserve()}},b.prototype.onUpdate=function(t){"function"==typeof t&&this._helper.afterUpdateEvents.push(t)},b.prototype.teardown=function(){delete this._helper,delete this.dataObserver},Object.defineProperties(b.prototype,r);var A=function(t){this.store=t,this.listeners={},this.counter=0};A.prototype.attachObserver=function(t,e){var r=this;if(e&&t&&0!==t.length){++this.counter;var n="data-slice:"+this.counter;return this.listeners[n]={keys:t,listener:e},function(){delete r.listeners[n]}}},A.prototype.dataUpdatedAt=function(t){var e=[],r=f(t).join(">>");for(var n in this.listeners){var o=this.listeners[n],i=o.keys,a=o.listener;0<(i=i.filter(function(t){var e=f(t).join(">>");return e.startsWith(r)||r.startsWith(e)})).length&&e.push([i,a])}e.forEach(function(t){var e=t[0],r=t[1];try{r(e)}catch(t){console.log("Error updating",r,e)}})},A.prototype.teardown=function(){this.listeners={}};var U=function(t,e){void 0===e&&(e={});var r=e.keySeperator;void 0===r&&(r="."),this.data=t,this.segments=[],this.dataObserver=new A(this),this.keySeperator=r};return U.prototype.triggerEvents=function(t){this.dataObserver.dataUpdatedAt(t)},U.prototype.executeUtil=function(t,e){var r=e[0];return e[1]&&this.triggerEvents(t),r},U.prototype.get=function(t,e){return s(this.data,t,e)},U.prototype.set=function(t,e,r){return void 0===r&&(r=!1),this.executeUtil(t,h(this.data,t,e,r))},U.prototype.coalesce=function(t,e){return function(t,e,r){for(var n=0,o=e.length;n<o;++n){var i=s(t,e[n]);if(void 0!==i)return i}return r}(this.data,t,e)},U.prototype.empty=function(t){return this.executeUtil(t,function(t,e){var r,n=!1,o=s(t,e);if(void 0===o)return[!0,n];switch(!0){case"string"==typeof o:r="";break;case"number"==typeof o:r=0;break;case"boolean"==typeof o:r=!1;break;case Array.isArray(o):o.length=0;break;case"object"==typeof o:for(var i in o)o.hasOwnProperty(i)&&(n=delete o[i]||n);return[!0,n]}return h(t,e,r)}(this.data,t))},U.prototype.insert=function(t,e,r){return this.executeUtil(t,(n=this.data,o(n,t,"splice",r,0,e)));var n},U.prototype.push=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return this.executeUtil(t,function(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return o.apply(void 0,[t,e,"push"].concat(r))}.apply(void 0,[this.data,t].concat(e)))},U.prototype.unshift=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return this.executeUtil(t,function(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return o.apply(void 0,[t,e,"unshift"].concat(r))}.apply(void 0,[this.data,t].concat(e)))},U.prototype.pop=function(t){return this.executeUtil(t,(e=this.data,o(e,t,"pop")));var e},U.prototype.shift=function(t){return this.executeUtil(t,(e=this.data,o(e,t,"shift")));var e},U.prototype.splice=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return this.executeUtil(t,function(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return o.apply(void 0,[t,e,"splice"].concat(r))}.apply(void 0,[this.data,t].concat(e)))},U.prototype.sort=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return this.executeUtil(t,function(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return o.apply(void 0,[t,e,"sort"].concat(r))}.apply(void 0,[this.data,t].concat(e)))},U.prototype.ensureExists=function(t,e){return this.executeUtil(t,(r=this.data,h(r,t,e,!0)));var r},U.prototype.delete=function(t){return this.executeUtil(t,g(this.data,t))},U.prototype.has=function(t){return e=this.data,null!=s(e,t);var e},U.prototype.merge=function(t,e){return this.executeUtil(t,(r=this.data,o=e,h(r,n=t,a(s(r,n),o))));var r,n,o},U.prototype.increment=function(t,e){return this.executeUtil(t,v(this.data,t,e))},U.prototype.decrement=function(t,e){return this.executeUtil(t,(r=this.data,void 0===(n=e)&&(n=1),v(r,t,-1*n)));var r,n},U.prototype.toggle=function(t){return this.executeUtil(t,(e=this.data,n=!!s(e,r=t),h(e,r,!n)));var e,r,n},U.prototype.paths=function(t,e,r){var n=new b(t,e,r||this.keySeperator,this,this.dataObserver);return this.segments.push(n),n},U.prototype.bind=function(t){void 0===t&&(t={});var e,r=t.to,n=t.afterUpdate,o=t.id,i=t.keySeperator,a=t.paths,s=r;if(Array.isArray(s)&&(s=r[1]),e=s.__segment)return e.linkComponent(r);(e=this.paths(a,o,i)).onUpdate(n);var u=e.linkComponent(r);return Array.isArray(r)?u:e},U.prototype.destroySegment=function(t){var e=this.segments.indexOf(t);-1<e&&this.segments.splice(e,1)},U.prototype.destroy=function(){this.segments.forEach(function(t){t.teardown()}),this.dataObserver.teardown(),this.data={}},U});
//# sourceMappingURL=clearx.js.map
