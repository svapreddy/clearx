/** @license
 * Autodesk clearx
 * Date: 2019-10-02
 * License: Apache-2.0
 *
 * Bundled dependencies (npm packages): 
 * {"package":"deepmerge@3.1.0","license":"MIT","link":"https://github.com/KyleAMathews/deepmerge"}, {"package":"fast-deep-equal@2.0.1","license":"MIT","link":"https://github.com/epoberezkin/fast-deep-equal#readme"}
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ClearX=e()}(this,function(){"use strict";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var t,o=(function(t,e){t.exports=function(){var f=function(t){return!(!(n=t)||"object"!=typeof n||(e=t,"[object RegExp]"===(r=Object.prototype.toString.call(e))||"[object Date]"===r||e.$$typeof===i));var e,r,n},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function p(t,e){return!1!==e.clone&&e.isMergeableObject(t)?l((r=t,Array.isArray(r)?[]:{}),t,e):t;var r}function h(t,e,r){return t.concat(e).map(function(t){return p(t,r)})}function l(t,e,r){(r=r||{}).arrayMerge=r.arrayMerge||h,r.isMergeableObject=r.isMergeableObject||f;var n,i,o,a,s=Array.isArray(e),u=Array.isArray(t),c=s===u;return c?s?r.arrayMerge(t,e,r):(n=t,i=e,a={},(o=r).isMergeableObject(n)&&Object.keys(n).forEach(function(t){a[t]=p(n[t],o)}),Object.keys(i).forEach(function(t){o.isMergeableObject(i[t])&&n[t]?a[t]=l(n[t],i[t],o):a[t]=p(i[t],o)}),a):p(e,r)}return l.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(t,e){return l(t,e,r)},{})},l}()}(t={exports:{}},t.exports),t.exports),l=Array.isArray,y=Object.keys,d=Object.prototype.hasOwnProperty,u=function(t){return isNaN(t)?t:parseInt(t,10)},f=function(t,e,r){return!i(t[e],r)&&(t[e]=r,t[e]===r)},n=function(t){Object.freeze&&Object.freeze(t)},i=function(t,e){return void 0!==t&&function t(e,r){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){var n,i,o,a=l(e),s=l(r);if(a&&s){if((i=e.length)!=r.length)return!1;for(n=i;0!=n--;)if(!t(e[n],r[n]))return!1;return!0}if(a!=s)return!1;var u=e instanceof Date,c=r instanceof Date;if(u!=c)return!1;if(u&&c)return e.getTime()==r.getTime();var f=e instanceof RegExp,p=r instanceof RegExp;if(f!=p)return!1;if(f&&p)return e.toString()==r.toString();var h=y(e);if((i=h.length)!==y(r).length)return!1;for(n=i;0!=n--;)if(!d.call(r,h[n]))return!1;for(n=i;0!=n--;)if(!t(e[o=h[n]],r[o]))return!1;return!0}return e!=e&&r!=r}(t,e)},p=function(t,e,r){if(void 0===e&&(e="."),void 0===r&&(r="\\"),!t)return[];if(Array.isArray(t))return t;for(var n=[],i="",o=0,a=t.length;o<a;++o){var s=t[o];s===e&&t[o-1]!==r?(0<i.length&&n.push(u(i)),i=""):s!==r&&(i+=t[o])}return 0<i.length&&n.push(u(i)),n},s=function(t,e,r){if(void 0===t)return r;if(!e||0===e.length)return t;var n=(e=p(e))[0],i=e.slice(1);return isNaN(n)||(n*=1),s(t[n],i,r)},h=function(t,e,r,n){var i=!1;if(void 0===t)return[!1,i];if(!e||0===e.length)return[!1,i];var o=(e=p(e))[0],a=e[1],s=e.slice(2);if(a){if(!t.hasOwnProperty(o)){var u=isNaN(a)?{}:[];i=f(t,o,u)}var c=h(t[o],[a].concat(s),r,n);return[c[0],c[1]||i]}return t.hasOwnProperty(o)&&n?[!0,i]:[!0,i=f(t,o,r)]},c=["push","pop","splice","shift","unshift","sort"],a=function(t,e,r){for(var n=[],i=arguments.length-3;0<i--;)n[i]=arguments[i+3];if(-1===c.indexOf(r))return!1;var o=s(t,e);Array.isArray(o)||h(t,e,o=[]);var a=o.length;return o[r].apply(o,n),[!0,o.length!==a]},v=function(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return a.apply(void 0,[t,e,"unshift"].concat(r))},g=function(t,e){var r=!1;if(void 0===t)return[!1,r];if(!e||0===e.length)return[!1,r];var n=(e=p(e))[0],i=e.slice(1);return 1===e.length?(Array.isArray(t)&&!isNaN(n)?r=v(t,n,1):t.hasOwnProperty(n)&&(r=delete t[n]),[!0,r]):g(t[n],[].concat(i))},r=function(t,e,r){this.config=t,this.store=e,this.dataObserver=r,this.detachListeners=function(){},this.keySeperator=".",this.listeningKeys={},this.bootstrap(),this.active=!0},e={data:{configurable:!0}};r.prototype.attachListeners=function(){var t=this.listenDataChanges(),e=this.listenUnmount();return function(){t(),e()}},r.prototype.normalizePaths=function(){var t={},e=this.config.paths;for(var r in e)e.hasOwnProperty(r)&&(t[r]=p(e[r],this.keySeperator));this.listeningKeys=t},r.prototype.listenDataChanges=function(){var t=this,e=Object.values(this.listeningKeys);return this.dataObserver.attachObserver(e,this.dataUpdated.bind(this)),function(){t.dataObserver.detachObserver(t)}},r.prototype.listenUnmount=function(){var t=this,e=this.config.to;return this.componentWillUnmount=e.componentWillUnmount,e.componentWillUnmount=function(){t.destroy(),"function"==typeof t.componentWillUnmount&&t.componentWillUnmount.call(e)},function(){e.componentWillUnmount=t.componentWillUnmount,delete t.componentWillUnmount}},e.data.get=function(){var t={},e=this.config.paths;for(var r in e)t[r]=this.store.get(e[r]);return n(o({},t))},r.prototype.dataUpdated=function(){this.assignState()},r.prototype.assignState=function(t){var e,r,n;Array.isArray(this.config.to)?(r=(e=this.config.to)[0],n=e[1]):r=this.config.to;var i=this.data;"function"==typeof n?!t&&n(i):"function"==typeof r.setState?t?r.state.store=i:r.setState({store:i}):r.store=i;var o=this.config;return o&&"function"==typeof o.afterUpdate&&o.afterUpdate(i),i},r.prototype.bootstrap=function(){this.normalizePaths(),this.detachListeners=this.attachListeners(),this.interface={store:this.assignState(!0),destroy:this.destroy.bind(this)},n(this.interface)},r.prototype.destroy=function(){this.detachListeners()},Object.defineProperties(r.prototype,e);var b=function(t){this.store=t,this.listeners={},this.counter=0};b.prototype.attachObserver=function(t,e){var r=this;if(e&&t&&0!==t.length){++this.counter;var n="data-slice:"+this.counter;return this.listeners[n]={keys:t,listener:e},function(){delete r.listeners[n]}}},b.prototype.dataUpdatedAt=function(t){var e=[],r=p(t).join(">>");for(var n in this.listeners){var i=this.listeners[n],o=i.keys,a=i.listener;0<(o=o.filter(function(t){var e=p(t).join(">>");return e.startsWith(r)||r.startsWith(e)})).length&&e.push([o,a])}e.forEach(function(t){var e=t[0],r=t[1];try{r(e)}catch(t){console.log("Error updating",r,e)}})},b.prototype.destroy=function(){this.listeners={}};var m=function(t,e){var r=e.keySeperator;void 0===r&&(r="."),this.data=t,this.segments=[],this.dataObserver=new b(this),this.keySeperator=r};return m.prototype.triggerEvents=function(t){this.dataObserver.dataUpdatedAt(t)},m.prototype.executeUtil=function(t,e){var r=e[0];return e[1]&&this.triggerEvents(t),r},m.prototype.get=function(t,e){return s(this.data,t,e)},m.prototype.set=function(t,e,r){return void 0===r&&(r=!1),this.executeUtil(t,h(this.data,t,e,r))},m.prototype.coalesce=function(t,e){return function(t,e,r){for(var n=0,i=e.length;n<i;++n){var o=s(t,e[n]);if(void 0!==o)return o}return r}(this.data,t,e)},m.prototype.empty=function(t){return this.executeUtil(t,function(t,e){var r,n=!1,i=s(t,e);if(void 0===i)return[!0,n];switch(!0){case"string"==typeof i:r="";break;case"number"==typeof i:r=0;break;case"boolean"==typeof i:r=!1;break;case Array.isArray(i):i.length=0;break;case"object"==typeof i:for(var o in i)i.hasOwnProperty(o)&&(n=delete i[o]||n);return[!0,n]}return h(t,e,r)}(this.data,t))},m.prototype.insert=function(t,e,r){return this.executeUtil(t,(n=this.data,a(n,t,"splice",r,0,e)));var n},m.prototype.push=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return this.executeUtil(t,function(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return a.apply(void 0,[t,e,"push"].concat(r))}.apply(void 0,[this.data,t].concat(e)))},m.prototype.unshift=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return this.executeUtil(t,function(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return a.apply(void 0,[t,e,"unshift"].concat(r))}.apply(void 0,[this.data,t].concat(e)))},m.prototype.pop=function(t){return this.executeUtil(t,(e=this.data,a(e,t,"pop")));var e},m.prototype.shift=function(t){return this.executeUtil(t,(e=this.data,a(e,t,"shift")));var e},m.prototype.splice=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return this.executeUtil(t,v.apply(void 0,[this.data,t].concat(e)))},m.prototype.sort=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return this.executeUtil(t,function(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return a.apply(void 0,[t,e,"sort"].concat(r))}.apply(void 0,[this.data,t].concat(e)))},m.prototype.ensureExists=function(t,e){return this.executeUtil(t,(r=this.data,h(r,t,e,!0)));var r},m.prototype.delete=function(t){return this.executeUtil(t,g(this.data,t))},m.prototype.has=function(t){return e=this.data,null!=s(e,t);var e},m.prototype.merge=function(t,e){return this.executeUtil(t,(r=this.data,i=e,h(r,n=t,o(s(r,n),i))));var r,n,i},m.prototype.bind=function(t){var e=new r(Object.assign({},{keySeperator:this.keySeperator},t),this,this.dataObserver);return this.segments.push(e),e.interface},m.prototype.destroy=function(){this.segments.forEach(function(t){t.destroy()}),this.dataObserver.destroy(),this.data={}},m});
//# sourceMappingURL=clearx.js.map
